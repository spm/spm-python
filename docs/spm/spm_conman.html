<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.1">
<title>spm.spm_conman API documentation</title>
<meta name="description" content="">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>spm.spm_conman</code></h1>
</header>
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="spm.spm_conman.spm_conman"><code class="name flex">
<span>def <span class="ident">spm_conman</span></span>(<span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Contrast manager: GUI for defining valid contrasts<br>
FORMAT varargout=spm_conman(varargin)<br>
- An embedded callback, multi-function function<br>
- For detailed programmers comments,<br>
see format specifications in main body of program (below user help)
</p>
<hr>
<p>The contrast manager is a user interface for the selection and definition<br>
of contrasts for a given SPM design. At present, the contrast manager<br>
provides only interactive GUI facilities.
</p>
<p>See also: spm_getSPM.m, spm_contrasts.m
</p>
<p>==========================================================================<br>
U s i n g
t h e
S P M
C o n t r a s t
M a n a g e r
G U I<br>
==========================================================================
</p>
<p>The contrast manager graphicsl user interface (GUI) is a dialog box for<br>
the specification and selection of contrasts. The contrast selection <br>
interface is presented initially, pressing the "Define new contrast&hellip;" <br>
button pops up the contrast definition interface:
</p>
<hr>
<pre><code>                                   ConMan: Contrast selection interface
</code></pre>
<p>The contrast selection interface consists of:
</p>
<ul>
<li>
<p>"Show" statistic type radio-buttons: "t-contrasts", "F-contrasts", "All":<br>
Selects the types of contrast that are presented for selection in the<br>
contrast selection list box. Depending on the use of the contrast<br>
manager, some options may be unavailable.
</p>
</li>
<li>
<p>List-box of currently defined contrasts.<br>
Each contrast is listed by number, type ("T" or "F"), and name. Only<br>
contrasts of types specified by the settings of the "show"<br>
radiobuttons are shown.<br>
Select contrasts by clicking on their entry in the list-box. To<br>
select multiple contrasts (for conjunctions or masking, if<br>
appropriate), the standard techniques of drag selection and<br>
shift-clicking can be used for selecting a set of adjacent contrasts,<br>
control-click to select individual contrasts separated in the list.<br>
Selected contrasts are highlit in black.
</p>
</li>
<li>
<p>Image of the design matrix:<br>
A grey-scale representation of the design matrix, to aid interpretation<br>
of the contrasts.
</p>
<p>The design matrix is "surfable": Clicking (and holding or dragging)<br>
around the design matrix image reports the corresponding value of the<br>
design matrix ('normal' click - "left" mouse button usually), the<br>
image filename ('extend' mouse click - "middle" mouse), or parameter<br>
name ('alt' click - "right" mouse). Double clicking the design matrix<br>
image extracts the design matrix into the base MATLAB workspace.<br>
(Surfing is handled by spm_DesRep.m)
</p>
</li>
<li>
<p>Parameter estimability bar<br>
Under the design matrix the parameter estimability is displayed as<br>
a 1xp matrix of grey and white squares. Parameters that are not<br>
uniquely specified by the model are shown with a grey patch.
</p>
<p>Recall that only uniquely estimable parameters can be examined<br>
individually with [0,&hellip;,0,1,0,&hellip;,0] type contrats.
</p>
<p>Surfing the estimability image reports the parameter names and<br>
their estimability. Double clicking extracts the estimability<br>
vector into the base MatLab workspace.
</p>
</li>
<li>
<p>Contrast weights plot/image:<br>
The weights of the selected contrast(s) are imaged above the design<br>
matrix, labelled by their contrast number. t-contrasts are displayed<br>
as bar-charts, F-contrasts have their weights matrix c' depicted as a<br>
grey-scale image.
</p>
<p>Again, the contrast representation is "surfable": Clicking and<br>
dragging over the contrast image reports the contrast name, type and<br>
number, and the value of the contrast at the mouse location.
</p>
</li>
<li>
<p>"Define new contrast&hellip;" button:<br>
Pops up the contrast definition interface (described below)
</p>
</li>
<li>
<p>"Reset" button:<br>
Clears the current contrast selection.
</p>
</li>
<li>
<p>"Done" button:<br>
Press when the required contrasts have been selected.
</p>
</li>
<li>
<p>Status line:<br>
This indicates how many contrasts have been selected, how<br>
multi-contrast selections will be handled, and whether you can press<br>
"Done" yet!
</p>
</li>
</ul>
<p>In addition, the dialog has a figure ContextMenu, accessed by<br>
right-clicking in the figure background: In addition to providing<br>
repeats of the "Define new contrast&hellip;", "Reset" &amp; "Done" buttons<br>
described above, there are two additional options:
</p>
<pre><code>- crash out: this bails out of the contrast manager in a nice way!  
- rename:    This permits a single contrast to be re-named. You  
         must select the contrast to be renamed before pulling  
             up the context menu for this option to be available.
</code></pre>
<hr>
<pre><code>                                  ConMan: Contrast definition interface
</code></pre>
<p>To define a contrast, you must specify:<br>
1) a name<br>
2) the statistic type: "t-contrast" for SPM{T} or "F-contrast" for SPM{F}<br>
3) a valid set of contrast weights<br>
(for F-contrasts, this can also be generated given a reduced<br>
(design as a partition of the existing design
</p>
<p>The contrast definition interface consists of:
</p>
<ul>
<li>
<p>A lilac "name" edit widget for naming the new contrast<br>
Type the name of the contrast in this widget.<br>
Press return or move the focus to enter the name.
</p>
</li>
<li>
<p>Radio-buttons for selecting statistic type: "t-contrast" or "F-contrast"
</p>
</li>
<li>
<p>A large lilac edit widget for entering "contrast weights matrix"
</p>
<ul>
<li>Note that contrast weights should be entered transposed, with<br>
contrast weights in rows.
</li>
<li>Zero's will be automatically added to the right hand side of<br>
contrast weights as needed to give contrast weights matching the<br>
number of parameters. For example, if you are interested in<br>
contrasting the first two conditions of a design four parameters<br>
(design matrix with 4 columns), you need only enter "+1 -1". The<br>
contrast manager will parse this to [+1 -1 0 0].
</li>
<li>For t-contrasts, this will only accept a single line of input,<br>
since contrast weights c' for an SPM{T} must be a row-vector.<br>
Pressing <return> or moving the focus (by clicking on another GUI<br>
element, such as the "Submit" button) will enter the contrast<br>
weights for parsing.
</li>
<li>For F-contrasts, the widget accepts multi-line input.<br>
Pressing <return> will move to a new line. Press <ctrl>-<return> or<br>
move the focus (by clicking on another GUI element, such as the<br>
"Submit" button) to enter the contrast weights for parsing.
</li>
<li>Text entered in the "contrast weights matrix" is evaluated in the<br>
base workspace. Thus, matlab functions can be used in the widget,<br>
and base workspace variables can be referred to. (See the help for<br>
spm_input.m for more tips on using evaluated input widgets.)
</li>
</ul>
</li>
<li>
<p>For F-contrasts, a "columns for reduced design" edit widget appears:
</p>
<ul>
<li>Here you can specify SPM{F}s by specifying the reduced design as<br>
a sub-partition of the current design matrix.
</li>
<li>Enter the indices of the design matrix columns you wish to retain<br>
in the reduced design.
</li>
<li>Pressing <return> or moving the focus (by clicking on another GUI<br>
element, such as the "Submit" button) will enter the column indices<br>
for parsing.
</li>
<li>An F-contrast weights matrix is constructed from the specified<br>
partitioning. (The corresponding F-contrast weights are imaged<br>
above the design matrix picture. Double click (or "surf") the<br>
contrast image to see the actual values of the F-contrast weights<br>
matrix.)
</li>
<li>Again, text entered in the "columns for reduced design" is<br>
evaluated in the base workspace, permitting the use of functions<br>
and variables available in the base workspace.
</li>
<li>(Note that the F-contrast weights matrix produced may not be the<br>
simplest F-contrast possible for this test, and that the F-contrast<br>
weights matrix may not be full rank (e.g. may have two rows where<br>
one would do). Nonetheless, the F-test is equivalent for the<br>
specified partitioning.
</li>
</ul>
</li>
<li>
<p>"Submit" button:<br>
This button can be used to force parsing of the contrast weights (or<br>
columns for reduced design).
</p>
</li>
<li>
<p>contrast parsing errors pane &amp; contrast parsing info pane:
</p>
<ul>
<li>Once the contrast weights matrix has been entered in the GUI, the<br>
inout is parsed.
</li>
<li>First, each line is evaluated.
</li>
<li>Then, the results for each line are checked to ensure they define<br>
valid contrasts, with trailing zeros added as necessary so the<br>
contrast length matches the number of parameters.
</li>
<li>Errors encountered during parsing, and invalid contrast weights,<br>
are reported in the "contrast parsing errors" pane in red text.<br>
Usually the contrast cannot be defined if there are any errors!
</li>
<li>Information messages regarding contrast parsing appear in the lower<br>
"contrast parsing info" pane in green text.
</li>
<li>When defining an F-contrast via "columns for reduced design", the<br>
string defining the indices is similarly parsed, with errors and<br>
information messages appearing in the two panes.
</li>
</ul>
</li>
<li>
<p>Contrast weights plot/image:<br>
Depicts the contrast once valid contrast weights have been specified.
</p>
</li>
<li>
<p>Image of the design matrix:<br>
(As described above for the contrast selection interface)
</p>
</li>
<li>
<p>Parameter estimability bar<br>
(As described above for the contrast selection interface)
</p>
</li>
<li>
<p>"Reset" button:<br>
Resets the contrast definition interface, clearing any contrast<br>
currently being defined.
</p>
</li>
<li>
<p>"Cancel" button:<br>
Returns to the contrast selection interface without defining a new<br>
contrast.
</p>
</li>
<li>
<p>"OK" button:<br>
Once a valid set of contrast weights has been defined, and the<br>
contrast named, pressing "OK" defines the contrast and returns to the<br>
contrast selection interface, with the newly defined contrast<br>
selected.
</p>
</li>
<li>
<p>Status line:<br>
This indicates progress in contrast definition.<br>
Once a valid set of contrast weights have been specified, and a<br>
the contrast named, then the status line turns green, indicating<br>
that the current contrast can be defined by pressing "OK".
</p>
</li>
</ul>
<p>==========================================================================<br>
S P M
C o n t r a s t
m a n a g e m e n t<br>
==========================================================================
</p>
<p>Contrasts are stored by SPM in a single structure (See spm_FcUtil.m<br>
for the definition and handling of the contrast structure.)
</p>
<p>Note that the xCon structure for each contrast contains data specific<br>
to the current experimental design. Therefore, contrast structures<br>
can only be copied between analyses (to save re-entering contrasts)<br>
if the designs are <em>identical</em>.
</p>
<p>Although the contrasts are named by the user, they are referred to<br>
internally and on the corresponding contrast, ESS and SPM images (see<br>
spm_getSPM.m) by their contrast number, which indexes them in the<br>
order in which they were created. Because of this, it can be rather<br>
involved to delete any but the most recently defined contrast: All<br>
file references and indices would have to be canonicalised! Thus, no<br>
"delete" function is provided (as yet).
</p>
<hr>
<p><a href="https://github.com/spm/spm/blob/main/spm_conman.m">Link to the Matlab implementation.</a></p></div>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="spm" href="index.html">spm</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="spm.spm_conman.spm_conman" href="#spm.spm_conman.spm_conman">spm_conman</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.1</a>.</p>
</footer>
</body>
</html>
